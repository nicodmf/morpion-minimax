(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(t,e,n){t.exports=n(19)},16:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),a=n(9),o=n.n(a),u=(n(16),n(17),n(1)),l=n(2),s=n(4),c=n(3),h=n(5),v=n(6),d=n(7);function p(t){return JSON.parse(JSON.stringify(t))}var f=function(){function t(e,n){Object(u.a)(this,t),this.x=void 0,this.y=void 0,this.value=null,this.x=e,this.y=n}return Object(l.a)(t,null,[{key:"key",value:function(t,e){return"".concat(t,"-").concat(e)}},{key:"keyFromPoint",value:function(t){return this.key(t.x,t.y)}}]),t}(),m=function(){function t(e,n){Object(u.a)(this,t),this.points={},this.width=void 0,this.height=void 0,this.winCount=3,this.winner=null,this.win={},this.width=e,this.height=n,(this.width>5||this.height>5)&&(this.winCount=5);for(var i=0;i<n;i++)for(var r=0;r<e;r++){var a=new f(r,i);this.points[f.keyFromPoint(a)]=a}}return Object(l.a)(t,[{key:"isWinningPoint",value:function(t,e){switch(this.win.type){case"line":return e==this.win.start.y&&t>=this.win.start.x&&t<this.win.start.x+this.winCount;case"column":return t==this.win.start.x&&e>=this.win.start.y&&e<this.win.start.y+this.winCount;case"ob":for(var n=0;n<this.winCount;n++)if(t===this.win.start.x+n&&e===this.win.start.y+n)return!0;return!1;case"ot":for(var i=0;i<this.winCount;i++)if(t===this.win.start.x+i&&e===this.win.start.y-i)return!0;return!1}}},{key:"value",value:function(t,e){return this.points[f.key(t,e)].value}},{key:"set",value:function(t,e,n){return this.points[f.key(t,e)].value=n}}],[{key:"emptyPoints",value:function(t){for(var e=[],n=0,i=Object.entries(t.points);n<i.length;n++){var r=i[n],a=Object(d.a)(r,2),o=(a[0],a[1]);null===o.value&&e.push(o)}return e.length===t.width*t.height?[new f(1,0),new f(0,0),new f(1,1)]:e}},{key:"completed",value:function(t){for(var e=0,n=Object.entries(t.points);e<n.length;e++){var i=n[e],r=Object(d.a)(i,2);r[0];if(null===r[1].value)return!1}return!0}},{key:"line",value:function(t,e,n){var i=n.points[f.key(t,e)].value;if(null===i)return!1;if(t>n.width-n.winCount)return!1;for(var r=t+1;r<t+n.winCount;r++)if(!n.points[f.key(r,e)]||n.points[f.key(r,e)].value!==i)return!1;return n.winner=i,!0}},{key:"column",value:function(t,e,n){var i=n.points[f.key(t,e)].value;if(null===i)return!1;if(e>n.height-n.winCount)return!1;for(var r=e+1;r<e+n.winCount;r++)if(!n.points[f.key(t,r)]||n.points[f.key(t,r)].value!==i)return!1;return n.winner=i,!0}},{key:"obliqBottom",value:function(t,e,n){var i=n.points[f.key(t,e)].value;if(null===i)return!1;if(t>n.width-n.winCount)return!1;for(var r=0;r<n.winCount;r++)if(!n.points[f.key(t+r,e+r)]||n.points[f.key(t+r,e+r)].value!==i)return!1;return n.winner=i,!0}},{key:"obliqTop",value:function(t,e,n){var i=n.points[f.key(t,e)].value;if(null===i)return!1;if(t>n.width-n.winCount)return!1;for(var r=0;r<n.winCount;r++)if(!n.points[f.key(t+r,e-r)]||n.points[f.key(t+r,e-r)].value!==i)return!1;return n.winner=i,!0}},{key:"won",value:function(e){for(var n=0;n<e.height;n++)for(var i=0;i<e.width;i++){if(t.line(i,n,e))return e.win={start:{x:i,y:n},type:"line"},!0;if(t.column(i,n,e))return e.win={start:{x:i,y:n},type:"column"},!0;if(t.obliqBottom(i,n,e))return e.win={start:{x:i,y:n},type:"ob"},!0;if(t.obliqTop(i,n,e))return e.win={start:{x:i,y:n},type:"ot"},!0}return!1}},{key:"hasAdjacentPoint",value:function(t,e,n){for(var i=Math.max(0,t.x-n);i<Math.min(e.width,t.x+n);i++)for(var r=Math.max(0,t.y-n);r<Math.min(e.width,t.y+n);r++)if(null!==e.points[f.key(i,r)].value)return!0;return!1}}]),t}(),b=function(){function t(e,n){Object(u.a)(this,t),this.board=void 0,this.point=void 0,this.computedChilds=null,this.board=e,this.point=n}return Object(l.a)(t,[{key:"childs",get:function(){if(this.computedChilds)return this.computedChilds;var e=[];if(m.won(this.board))return[];var n=!0,i=!1,r=void 0;try{for(var a,o=m.emptyPoints(this.board)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=p(a.value);u.value="X"===this.point.value?"O":"X";var l=p(this.board);l.points[f.keyFromPoint(u)]=u,e.push(new t(l,u))}}catch(s){i=!0,r=s}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return this.computedChilds=e,this.computedChilds}},{key:"isTerminal",get:function(){return 0===this.childs.length}},{key:"value",get:function(){return null!==this.board.winner?"X"===this.board.winner?-100:100:0}}]),t}(),y=function(){function t(e,n){Object(u.a)(this,t),this.board=void 0,this.point=void 0,this.count=0,this.value=-1/0,this.board=p(e),this.board.points[f.keyFromPoint(n)]=n,this.point=n}return Object(l.a)(t,[{key:"compute",value:function(){var t=new b(this.board,this.point);this.value=this.alphabeta(t,100)}},{key:"alphabeta",value:function(t,e){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1/0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return this.count++,0===e||t.isTerminal?t.value*e:("O"===t.point.value?(n=1/0,t.childs.forEach(function(t){if(n=Math.min(n,i.alphabeta(t,e-1,r,a)),r>=n)return n;a=Math.min(a,n)})):(n=-1/0,t.childs.forEach(function(t){if((n=Math.max(n,i.alphabeta(t,e-1,r,a)))>=a)return n;r=Math.max(r,n)})),n)}},{key:"minimax",value:function(t,e,n){var i,r=this;return this.count++,0===e||t.isTerminal?t.value*e:(n?(i=-1/0,t.childs.forEach(function(t){i=Math.max(i,r.minimax(t,e-1,!1))})):(i=1/0,t.childs.forEach(function(t){i=Math.min(i,r.minimax(t,e-1,!0))})),i)}}]),t}();y.computed={};var w=function(){function t(e){Object(u.a)(this,t),this.board=void 0,this.resultingPoint=new f(-1,-1),this.board=e}return Object(l.a)(t,[{key:"evaluate",value:function(){var t=null,e=!0,n=!1,i=void 0;try{for(var r,a=m.emptyPoints(this.board)[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value,u=p(o);u.value=null===o.value||"X"===o.value?"O":"X";var l=new y(this.board,u);l.compute(),(null===t||l.value>t.value)&&(t=l),console.log(u,l.value,l.count)}}catch(s){n=!0,i=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}console.log(t),this.resultingPoint=null!==t?t.point:new f(-1,-1)}},{key:"betterPoint",get:function(){return this.resultingPoint}}]),t}(),k=function(){function t(e){Object(u.a)(this,t),this.setState=void 0,this.setState=e}return Object(l.a)(t,[{key:"play",value:function(t){var e=new w(t);e.evaluate();var n=e.betterPoint;t.points[f.keyFromPoint(n)]=n;var i=m.won(t),r=m.completed(t);this.setState({board:t,playable:!i&&!r,won:i,ended:r})}}]),t}(),O=Object(i.createContext)({width:3,height:3,board:new m(3,3)}),g=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(s.a)(this,Object(c.a)(e).call(this,t))).state={width:3,height:3,playable:!0,won:!1,ended:!1,board:new m(3,3),choice:function(t,e){return function(){var i=n.state.board;i.set(t,e,"X"),n.setState({board:i,playable:!1},function(){m.won(i)?(n.setState({won:!0}),console.log("won by",i.winner)):m.completed(i)?n.setState({ended:!0}):(console.log("not won"),n.robot.play(i))})}},restart:function(){var t=new m(3,3);n.setState({board:t,playable:!0,won:!1,ended:!1})},restartWithRobot:function(){var t=new m(3,3);n.setState({board:t,playable:!0,won:!1,ended:!1},function(){return n.robot.play(t)})}},n.robot=void 0,n.state.board=new m(n.state.width,n.state.height),n.robot=new k(n.setState.bind(Object(v.a)(n))),n}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(O.Provider,{value:this.state},this.props.children)}}]),e}(i.Component),j=O,x=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.props,e=t.x,n=t.y,i=this.context,a=i.board,o=i.playable,u=a.value(e,n),l={};return a.winner&&a.isWinningPoint(e,n)&&(l.background="X"===a.winner?"green":"red"),r.a.createElement("td",{onClick:o&&null===u?this.context.choice(e,n):null,style:l},u)}}]),e}(r.a.PureComponent);x.contextType=j;n(18);function E(t){for(var e=[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n<t;n++)e.push(n);return e}var C=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.context,e=t.width,n=t.height,i=t.playable;t.won;return r.a.createElement("table",{style:{cursor:i?"pointer":"initial"}},r.a.createElement("tbody",null,E(n).map(function(t,n){return r.a.createElement("tr",{key:n},E(e).map(function(e,n){return r.a.createElement(x,{key:n,x:e,y:t})}))})))}}]),e}(r.a.PureComponent);C.contextType=j;var P=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Jouer au morpion contre l'algorithme minimax"))}}]),e}(r.a.PureComponent);P.contextType=j;var S=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.context,n=e.won,i=e.board,a=e.ended;return r.a.createElement("div",null,n?r.a.createElement("h2",null,"Partie gagn\xe9e par les ",i.winner):null,a?r.a.createElement("h2",null,"Partie finie sur une \xe9galit\xe9"):null,a||n?r.a.createElement("button",{onClick:function(){return t.context.restart()}},"Recommencer"):null,a||n?r.a.createElement("button",{onClick:function(){return t.context.restartWithRobot()}},"Recommencer, le robot commence"):null)}}]),e}(r.a.PureComponent);S.contextType=j;var M=function(t){function e(){return Object(u.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"help"},r.a.createElement("p",null,"Ce mort pion est une mise en oeuvre de l'algorythme minimax sans limite de profondeur.",r.a.createElement("br",null),"Le nombre d'it\xe9ration de l'algorythme suit exponentiellement le nombre de case vide (visible dans l'inspecteur) :",r.a.createElement("ul",null,r.a.createElement("li",null,"~65000 par case si le robot commence (9 cases vides)"),r.a.createElement("li",null,"~7000 par case au deuxi\xe8me coup"),r.a.createElement("li",null,"~180 par case au troisi\xe8me coup")),"Afin de limiter le temps de r\xe9ponse, seule trois cases sont laiss\xe9es au premier coup au robot s'il commence (le centre, un angle, un milieu ext\xe9rieur). Il choisi toujours le centre haut."),r.a.createElement("p",null,"Le jeu a \xe9t\xe9 d\xe9velopp\xe9 pour une prise en charge de grille plus importante, mais au regard des temps de r\xe9solution (plusieur dizaines par secondes pour des grilles de 30 cases), seule la version \xe0 9 cases est mise en ligne."),r.a.createElement("p",null,"Dans cette configurations, le robot et l'homme s'ils ne font aucune erreur ne gagnent jamais. Je vous laisse tester et me pr\xe9venir si vous r\xe9ussissez \xe0 vaincre l'ordinateur."))}}]),e}(r.a.PureComponent);M.contextType=j;var T=function(){return r.a.createElement(g,null,r.a.createElement("div",{className:"App"},r.a.createElement(P,null),r.a.createElement(C,null),r.a.createElement(S,null),r.a.createElement(M,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.c8254bd1.chunk.js.map